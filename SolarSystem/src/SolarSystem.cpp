// ============================================================================
// ملف SolarSystem.cpp - تنفيذ كلاس النظام الشمسي
// ============================================================================
// هذا الملف يحتوي على جميع الدوال التي تنفذ سلوك النظام الشمسي الكامل
// يتضمن إنشاء الكواكب ورسم الشمس وتحديث النظام
// ============================================================================

// تضمين ملف تعريف كلاس النظام الشمسي (يحتوي على تعريفات المتغيرات والدوال)
#include "../include/SolarSystem.h"

// تضمين مكتبة OpenGL للرسومات ثلاثية الأبعاد
#include <GL/glut.h>

// تضمين مكتبة الرياضيات للدوال الرياضية (sin, cos, sqrt, etc.)
#include <math.h>

// ============================================================================
// ثوابت رياضية
// ============================================================================

// ثابت رياضي لقيمة π (باي) بدقة عالية جداً (32 رقم عشري)
// يُستخدم في جميع الحسابات الفلكية والهندسية
const double M_PI_CONST = 3.1415926535897932384626433832795;

// ============================================================================
// دالة البناء Constructor - تقوم بإنشاء النظام الشمسي الكامل
// ============================================================================
// هذه الدالة تستدعى عند إنشاء كائن النظام الشمسي
// تقوم بإنشاء جميع الكواكب وتهيئتها بالبيانات الفلكية الحقيقية
// البيانات المستخدمة هنا دقيقة علمياً مع ألوان محسّنة وأقمار متعددة
// ============================================================================
SolarSystem::SolarSystem() 
    // قائمة التهيئة: تهيئة المتغيرات مباشرة قبل دخول جسم الدالة
    : numPlanets(9),        // عدد الكواكب (9 مع بلوتو)
      animationSpeed(1.0),   // سرعة المحاكاة الافتراضية (1.0 = سرعة عادية)
      time(0.0),            // الوقت الحالي في المحاكاة (يبدأ من 0)
      showPluto(true)       // إظهار بلوتو افتراضياً (true = ظاهر)
{
    // ========================================================================
    // إنشاء الكواكب بالترتيب من الأقرب إلى الأبعد عن الشمس
    // ========================================================================
    
    // ------------------------------------------------------------------------
    // عطارد (Mercury) - أقرب كوكب للشمس
    // ------------------------------------------------------------------------
    // لون رمادي فاتح (0.75, 0.75, 0.75)
    // لا يوجد أقمار، لا يوجد حلقات
    planets[0] = new Planet(
        4.0,      // نصف قطر المدار (المحور شبه الرئيسي)
        4.15,     // سرعة الدوران حول الشمس (أسرع كوكب)
        0.38,     // حجم الكوكب (نصف القطر)
        1.0,      // سرعة الدوران حول المحور
        0.75, 0.75, 0.75,  // اللون (RGB): رمادي فاتح
        "Mercury", // اسم الكوكب
        0, nullptr,  // عدد الأقمار: 0، لا يوجد أقمار
        false, 0, 0, 0, 0, 0,  // لا يوجد حلقات
        0.2056,   // الانحراف المركزي (أعلى انحراف بين الكواكب)
        7.0,      // الميل المداري (بالدرجات)
        0.034,    // الميل المحوري (بالدرجات) - شبه معدوم
        77.45     // زاوية طول الحضيض (بالدرجات)
    );
    
    // ------------------------------------------------------------------------
    // الزهرة (Venus) - ثاني أقرب كوكب للشمس
    // ------------------------------------------------------------------------
    // لون أصفر-أبيض (0.95, 0.95, 0.85) - سحب حمضية
    // لا يوجد أقمار، لا يوجد حلقات
    planets[1] = new Planet(
        7.0,      // نصف قطر المدار
        1.62,     // سرعة الدوران حول الشمس
        0.95,     // حجم الكوكب (أكبر قليلاً من الأرض)
        0.4,      // سرعة الدوران حول المحور (بطيء جداً)
        0.95, 0.95, 0.85,  // اللون (RGB): أصفر-أبيض
        "Venus",  // اسم الكوكب
        0, nullptr,  // عدد الأقمار: 0
        false, 0, 0, 0, 0, 0,  // لا يوجد حلقات
        0.0067,   // الانحراف المركزي (أكثر المدارات دائرية)
        3.4,      // الميل المداري
        177.4,    // الميل المحوري (177.4° = يدور عكسياً!)
        131.53    // زاوية طول الحضيض
    );
    
    // ------------------------------------------------------------------------
    // الأرض (Earth) - كوكبنا
    // ------------------------------------------------------------------------
    // لون أزرق-أخضر (0.2, 0.5, 0.9) - محيطات وقارات
    // قمر واحد: القمر (Moon)
    Moon earthMoon = {
        1.5,              // نصف قطر مدار القمر حول الأرض
        0.27,             // حجم القمر
        3.0,              // سرعة دوران القمر حول الأرض
        {0.7, 0.7, 0.7},  // لون القمر (RGB): رمادي فاتح
        "Moon",           // اسم القمر
        0.0               // زاوية البداية
    };
    planets[2] = new Planet(
        10.0,     // نصف قطر المدار (المرجع: 1.0 AU)
        1.0,      // سرعة الدوران حول الشمس (المرجع: 1.0)
        1.0,      // حجم الكوكب (المرجع: 1.0)
        1.0,      // سرعة الدوران حول المحور
        0.2, 0.5, 0.9,  // اللون (RGB): أزرق-أخضر
        "Earth",  // اسم الكوكب
        1, &earthMoon,  // عدد الأقمار: 1، بيانات القمر
        false, 0, 0, 0, 0, 0,  // لا يوجد حلقات
        0.0167,   // الانحراف المركزي
        0.0,      // الميل المداري (0° = المستوى المرجعي)
        23.44,    // الميل المحوري (يسبب الفصول الأربعة)
        102.94    // زاوية طول الحضيض
    );
    
    // ------------------------------------------------------------------------
    // المريخ (Mars) - الكوكب الأحمر
    // ------------------------------------------------------------------------
    // لون أحمر-برتقالي (0.85, 0.35, 0.25) - صحراء حمراء
    // لا يوجد أقمار، لا يوجد حلقات
    planets[3] = new Planet(
        15.0,     // نصف قطر المدار
        0.53,     // سرعة الدوران حول الشمس
        0.53,     // حجم الكوكب (أصغر من الأرض)
        0.97,     // سرعة الدوران حول المحور
        0.85, 0.35, 0.25,  // اللون (RGB): أحمر-برتقالي
        "Mars",   // اسم الكوكب
        0, nullptr,  // عدد الأقمار: 0
        false, 0, 0, 0, 0, 0,  // لا يوجد حلقات
        0.0934,   // الانحراف المركزي (ثاني أعلى انحراف)
        1.85,     // الميل المداري
        25.19,    // الميل المحوري (مشابه للأرض - له فصول)
        336.04    // زاوية طول الحضيض
    );
    
    // ------------------------------------------------------------------------
    // المشتري (Jupiter) - أكبر كوكب
    // ------------------------------------------------------------------------
    // لون برتقالي-بني (0.85, 0.65, 0.5) - خطوط غازية
    // 4 أقمار رئيسية: Io, Europa, Ganymede, Callisto
    // حلقات رقيقة
    Moon jupiterMoons[4] = {
        {3.5, 0.15, 2.5, {0.8, 0.7, 0.6}, "Io", 0.0},           // Io - أقرب قمر
        {4.0, 0.12, 2.0, {0.7, 0.8, 0.7}, "Europa", 1.57},     // Europa - قمر جليدي
        {5.0, 0.18, 1.5, {0.6, 0.6, 0.7}, "Ganymede", 3.14},   // Ganymede - أكبر قمر
        {6.0, 0.14, 1.2, {0.5, 0.5, 0.6}, "Callisto", 4.71}     // Callisto - أبعد قمر
    };
    planets[4] = new Planet(
        25.0,     // نصف قطر المدار
        0.084,    // سرعة الدوران حول الشمس (بطيء)
        2.5,      // حجم الكوكب (أكبر كوكب)
        2.4,      // سرعة الدوران حول المحور (سريع جداً - 10 ساعات!)
        0.85, 0.65, 0.5,  // اللون (RGB): برتقالي-بني
        "Jupiter", // اسم الكوكب
        4, jupiterMoons,  // عدد الأقمار: 4، بيانات الأقمار
        true,     // يوجد حلقات
        2.8, 3.2, // نصف القطر الداخلي والخارجي للحلقات
        0.9, 0.85, 0.7,  // لون الحلقات (RGB): ذهبي فاتح
        0.0489,   // الانحراف المركزي
        1.3,      // الميل المداري
        3.13,     // الميل المحوري (شبه عمودي)
        14.75     // زاوية طول الحضيض
    );
    
    // ------------------------------------------------------------------------
    // زحل (Saturn) - الكوكب ذو الحلقات
    // ------------------------------------------------------------------------
    // لون ذهبي فاتح (0.95, 0.85, 0.65)
    // قمر واحد: تيتان (Titan)
    // حلقات ذهبية كبيرة
    Moon saturnMoons[1] = {
        {3.0, 0.3, 1.8, {0.7, 0.7, 0.6}, "Titan", 0.0}  // Titan - أكبر قمر لزحل
    };
    planets[5] = new Planet(
        35.0,     // نصف قطر المدار
        0.034,    // سرعة الدوران حول الشمس (بطيء جداً)
        2.0,      // حجم الكوكب (ثاني أكبر كوكب)
        2.2,      // سرعة الدوران حول المحور
        0.95, 0.85, 0.65,  // اللون (RGB): ذهبي فاتح
        "Saturn", // اسم الكوكب
        1, saturnMoons,  // عدد الأقمار: 1، بيانات القمر
        true,     // يوجد حلقات
        2.8, 3.5, // نصف القطر الداخلي والخارجي للحلقات (كبيرة)
        0.9, 0.85, 0.65,  // لون الحلقات (RGB): ذهبي
        0.0565,   // الانحراف المركزي
        2.49,     // الميل المداري
        26.73,    // الميل المحوري (يسبب رؤية مختلفة للحلقات)
        92.43     // زاوية طول الحضيض
    );
    
    // ------------------------------------------------------------------------
    // أورانوس (Uranus) - الكوكب المائل
    // ------------------------------------------------------------------------
    // لون أزرق-أخضر فاتح (0.5, 0.75, 0.85)
    // لا يوجد أقمار (في هذه المحاكاة)
    // حلقات زرقاء-خضراء
    planets[6] = new Planet(
        42.0,     // نصف قطر المدار
        0.012,    // سرعة الدوران حول الشمس (بطيء جداً)
        1.2,      // حجم الكوكب
        1.4,      // سرعة الدوران حول المحور
        0.5, 0.75, 0.85,  // اللون (RGB): أزرق-أخضر فاتح
        "Uranus", // اسم الكوكب
        0, nullptr,  // عدد الأقمار: 0
        true,     // يوجد حلقات
        1.4, 1.7, // نصف القطر الداخلي والخارجي للحلقات
        0.7, 0.8, 0.9,  // لون الحلقات (RGB): أزرق-أخضر
        0.0457,   // الانحراف المركزي
        0.77,     // الميل المداري
        97.77,    // الميل المحوري (97.77° = يدور على جانبه!)
        170.96    // زاوية طول الحضيض
    );
    
    // ------------------------------------------------------------------------
    // نبتون (Neptune) - أبعد كوكب حقيقي
    // ------------------------------------------------------------------------
    // لون أزرق عميق (0.2, 0.4, 0.95)
    // لا يوجد أقمار، لا يوجد حلقات (في هذه المحاكاة)
    planets[7] = new Planet(
        50.0,     // نصف قطر المدار
        0.006,    // سرعة الدوران حول الشمس (أبطأ كوكب حقيقي)
        1.15,     // حجم الكوكب
        1.2,      // سرعة الدوران حول المحور
        0.2, 0.4, 0.95,  // اللون (RGB): أزرق عميق
        "Neptune", // اسم الكوكب
        0, nullptr,  // عدد الأقمار: 0
        false, 0, 0, 0, 0, 0,  // لا يوجد حلقات
        0.0113,   // الانحراف المركزي
        1.77,     // الميل المداري
        28.32,    // الميل المحوري
        44.97     // زاوية طول الحضيض
    );
    
    // ------------------------------------------------------------------------
    // بلوتو (Pluto) - كوكب قزم
    // ------------------------------------------------------------------------
    // لون بني-رمادي (0.75, 0.65, 0.55)
    // قمر واحد: شارون (Charon)
    // لا يوجد حلقات
    Moon plutoMoon = {
        1.2,              // نصف قطر مدار شارون حول بلوتو
        0.12,             // حجم شارون
        1.5,              // سرعة دوران شارون حول بلوتو
        {0.6, 0.6, 0.6},  // لون شارون (RGB): رمادي
        "Charon",         // اسم القمر
        0.0               // زاوية البداية
    };
    planets[8] = new Planet(
        58.0,     // نصف قطر المدار
        0.004,    // سرعة الدوران حول الشمس (أبطأ)
        0.18,     // حجم الكوكب (أصغر كوكب)
        0.8,      // سرعة الدوران حول المحور
        0.75, 0.65, 0.55,  // اللون (RGB): بني-رمادي
        "Pluto (Dwarf)", // اسم الكوكب (كوكب قزم)
        1, &plutoMoon,  // عدد الأقمار: 1، بيانات القمر
        false, 0, 0, 0, 0, 0,  // لا يوجد حلقات
        0.2488,   // الانحراف المركزي (أعلى انحراف - مدار شديد الإهليلجية)
        17.16,    // الميل المداري (دليل على أنه من حزام كايبر)
        122.53,   // الميل المحوري
        224.07    // زاوية طول الحضيض
    );
}

// ============================================================================
// دالة الإتلاف Destructor - تقوم بحذف النظام الشمسي من الذاكرة
// ============================================================================
// هذه الدالة تستدعى تلقائياً عند حذف النظام الشمسي
// تقوم بتحرير الذاكرة المخصصة لجميع الكواكب
// ============================================================================
SolarSystem::~SolarSystem() {
    // المرور على جميع الكواكب وحذفها من الذاكرة
    for (int i = 0; i < 9; i++) {
        delete planets[i];  // حذف كل كوكب (بما في ذلك بلوتو)
        // عند حذف الكوكب، يتم استدعاء Planet::~Planet() تلقائياً
        // والذي يقوم بحذف الأقمار أيضاً
    }
}

// ============================================================================
// دالة التحديث - تقوم بتحريك الوقت للأمام
// ============================================================================
// هذه الدالة تستدعى في كل إطار لتحريك المحاكاة للأمام
// delta: الفترة الزمنية الصغيرة بين كل إطار وإطار (حوالي 0.01 ثانية)
// ============================================================================
void SolarSystem::update(double delta) {
    // زيادة الوقت بناءً على السرعة المحددة
    // animationSpeed يمكن زيادتها أو تقليلها لتسريع أو تبطيء الحركة
    // مثال: إذا كانت animationSpeed = 2.0، فالمحاكاة تسير بضعف السرعة
    time += delta * animationSpeed;
}

// ============================================================================
// دالة الرسم - ترسم الشمس وجميع الكواكب
// ============================================================================
// هذه الدالة الرئيسية لرسم النظام الشمسي الكامل
// تستدعى في كل إطار لرسم المشهد الحالي
// ============================================================================
void SolarSystem::draw() {
    // رسم الشمس أولاً (في المركز)
    // يجب رسم الشمس قبل الكواكب لأنها في الخلفية
    drawRealisticSun();
    
    // تحديد عدد الكواكب المراد رسمها
    // إذا كان showPluto = true، نرسم 9 كواكب (مع بلوتو)
    // إذا كان showPluto = false، نرسم 8 كواكب فقط
    int planetsToRender = showPluto ? 9 : 8;
    
    // رسم الكواكب (8 كواكب أو 9 مع بلوتو)
    // المرور على كل كوكب ورسمه في موقعه الحالي
    for (int i = 0; i < planetsToRender; i++) {
        planets[i]->draw(time);  // رسم الكوكب مع الوقت الحالي
        // دالة Planet::draw() ترسم الكوكب وأقماره وحلقاته
    }
    
    // الحلقات تُرسم الآن داخل Planet::draw() لكل كوكب
    // لا حاجة لرسمها هنا
}

// ============================================================================
// دالة لتبديل إظهار/إخفاء بلوتو
// ============================================================================
// هذه الدالة تستدعى عند الضغط على مفتاح 'P' لإظهار أو إخفاء بلوتو
// ============================================================================
void SolarSystem::togglePluto() { 
    // تبديل حالة إظهار بلوتو (من true إلى false أو العكس)
    showPluto = !showPluto;
    
    // تحديث عدد الكواكب بناءً على حالة بلوتو
    numPlanets = showPluto ? 9 : 8;
}

// ============================================================================
// إرجاع حالة ظهور بلوتو
// ============================================================================
// هذه الدالة ترجع true إذا كان بلوتو ظاهراً، و false إذا كان مخفياً
// ============================================================================
bool SolarSystem::isPlutoVisible() const { 
    return showPluto;  // إرجاع حالة إظهار بلوتو
}

// ============================================================================
// دالة لزيادة سرعة المحاكاة بمقدار 20%
// ============================================================================
// هذه الدالة تستدعى عند الضغط على مفتاح '+' لتسريع المحاكاة
// ============================================================================
void SolarSystem::increaseSpeed() { 
    animationSpeed *= 1.2;  // ضرب السرعة في 1.2 (زيادة 20%)
}

// ============================================================================
// دالة لتقليل سرعة المحاكاة بمقدار 20%
// ============================================================================
// هذه الدالة تستدعى عند الضغط على مفتاح '-' لإبطاء المحاكاة
// ============================================================================
void SolarSystem::decreaseSpeed() { 
    animationSpeed /= 1.2;  // قسمة السرعة على 1.2 (تقليل 20%)
}

// ============================================================================
// إرجاع الوقت الحالي في المحاكاة
// ============================================================================
// هذه الدالة ترجع الوقت الحالي في المحاكاة (بالثواني)
// ============================================================================
double SolarSystem::getTime() const { 
    return time;  // إرجاع الوقت الحالي
}

// ============================================================================
// إرجاع سرعة الحركة الحالية
// ============================================================================
// هذه الدالة ترجع سرعة المحاكاة الحالية
// 1.0 = سرعة عادية، 2.0 = ضعف السرعة، 0.5 = نصف السرعة
// ============================================================================
double SolarSystem::getAnimationSpeed() const { 
    return animationSpeed;  // إرجاع سرعة الحركة الحالية
}

// ============================================================================
// الحصول على مؤشر لكوكب معين بناءً على رقمه
// ============================================================================
// هذه الدالة ترجع مؤشر إلى كوكب معين
// index: رقم الكوكب (0 = عطارد، 1 = الزهرة، ...، 8 = بلوتو)
// ============================================================================
Planet* SolarSystem::getPlanet(int index) {
    // التحقق من أن الرقم صحيح (بين 0 و numPlanets-1)
    if (index >= 0 && index < numPlanets) {
        return planets[index];  // إرجاع مؤشر إلى الكوكب المطلوب
    }
    return NULL;  // إرجاع قيمة فارغة إذا كان الرقم خاطئ
}

// ============================================================================
// إرجاع عدد الكواكب
// ============================================================================
// هذه الدالة ترجع عدد الكواكب الحالي (8 أو 9 حسب حالة بلوتو)
// ============================================================================
int SolarSystem::getNumPlanets() const { 
    return numPlanets;  // إرجاع عدد الكواكب
}

// ============================================================================
// دالة رسم الشمس بمؤثرات بصرية واقعية
// ============================================================================
// هذه الدالة ترسم الشمس مع تأثيرات بصرية متقدمة
// تتضمن نواة الشمس وطبقات الهالة والتوهجات الشمسية
// ============================================================================
void SolarSystem::drawRealisticSun() {
    // حفظ المصفوفة الحالية (لإمكانية استعادتها لاحقاً)
    glPushMatrix();
    
    // إيقاف الإضاءة لرسم الشمس المضيئة
    // الشمس تنتج الضوء بنفسها، لذا لا تحتاج إضاءة خارجية
    glDisable(GL_LIGHTING);
    
    // ========================================================================
    // رسم نواة الشمس
    // ========================================================================
    // تعيين اللون الأصفر الفاتح للنواة (RGB: 1.0, 1.0, 0.95)
    glColor3f(1.0f, 1.0f, 0.95f);
    
    // رسم كرة صلبة بتفاصيل عالية (50 شريحة أفقية و 50 عمودية)
    // 2.5 = نصف قطر الشمس
    glutSolidSphere(2.5, 50, 50);
    
    // ========================================================================
    // رسم طبقات الهالة المحيطة بالشمس (Corona)
    // ========================================================================
    
    // تفعيل الشفافية (Blending) لرسم الطبقات الشفافة
    glEnable(GL_BLEND);
    
    // تحديد طريقة دمج الألوان لتأثير التوهج
    // GL_SRC_ALPHA: استخدام قيمة الشفافية من المصدر
    // GL_ONE: إضافة اللون إلى الخلفية (تأثير توهج قوي)
    glBlendFunc(GL_SRC_ALPHA, GL_ONE);
    
    // إيقاف كتابة العمق (Depth Mask) لتداخل الطبقات بشكل صحيح
    glDepthMask(GL_FALSE);
    
    // ------------------------------------------------------------------------
    // الطبقة الأولى: هالة صفراء فاتحة بشفافية 50%
    // ------------------------------------------------------------------------
    glColor4f(1.0f, 0.95f, 0.4f, 0.5f);  // لون أصفر فاتح مع شفافية 50%
    glutSolidSphere(2.8, 40, 40);        // كرة أكبر قليلاً من النواة
    
    // ------------------------------------------------------------------------
    // الطبقة الثانية: هالة برتقالية بشفافية 35%
    // ------------------------------------------------------------------------
    glColor4f(1.0f, 0.8f, 0.2f, 0.35f);  // لون برتقالي مع شفافية 35%
    glutSolidSphere(3.2, 40, 40);         // كرة أكبر
    
    // ------------------------------------------------------------------------
    // الطبقة الثالثة: هالة برتقالية داكنة بشفافية 25%
    // ------------------------------------------------------------------------
    glColor4f(1.0f, 0.7f, 0.1f, 0.25f);  // لون برتقالي داكن مع شفافية 25%
    glutSolidSphere(3.8, 40, 40);         // كرة أكبر
    
    // ------------------------------------------------------------------------
    // الطبقة الرابعة: هالة برتقالية محمرة بشفافية 15%
    // ------------------------------------------------------------------------
    glColor4f(1.0f, 0.6f, 0.0f, 0.15f);  // لون برتقالي محمر مع شفافية 15%
    glutSolidSphere(4.5, 40, 40);        // كرة أكبر
    
    // ------------------------------------------------------------------------
    // الطبقة الخامسة: هالة خارجية حمراء برتقالية بشفافية 8%
    // ------------------------------------------------------------------------
    glColor4f(1.0f, 0.5f, 0.0f, 0.08f);  // لون أحمر برتقالي مع شفافية 8%
    glutSolidSphere(5.5, 40, 40);        // كرة خارجية كبيرة
    
    // ========================================================================
    // رسم توهجات شمسية متحركة حول الشمس (Solar Flares)
    // ========================================================================
    // رسم 8 توهجات موزعة حول الشمس
    for (int i = 0; i < 8; i++) {
        // حساب شدة التوهج بشكل متذبذب باستخدام دالة sin
        // هذا يعطي تأثير الوميض للتوهجات الشمسية
        // time * 3.0: سرعة التذبذب
        // + i: إزاحة لكل توهج للحصول على تذبذبات مختلفة
        float flareIntensity = 0.3f + 0.2f * (float)sin(time * 3.0 + i);
        // الشدة تتذبذب بين 0.3 و 0.5
        
        // حفظ المصفوفة الحالية
        glPushMatrix();
        
        // دوران التوهجات حول الشمس بزوايا مختلفة
        // i * 45.0: توزيع التوهجات بالتساوي (360° / 8 = 45°)
        // time * 10.0: دوران التوهجات مع الوقت
        glRotatef((float)(i * 45.0 + time * 10.0), 0.0f, 1.0f, 0.0f);
        
        // وضع التوهج على بعد 3 وحدات من مركز الشمس
        glTranslatef(3.0f, 0.0f, 0.0f);
        
        // رسم التوهج بلون برتقالي وشدة متغيرة
        glColor4f(1.0f, 0.7f, 0.1f, flareIntensity);  // لون برتقالي مع شفافية متغيرة
        glutSolidSphere(0.4f, 10, 10);  // كرة صغيرة للتوهج
        
        // استعادة المصفوفة السابقة
        glPopMatrix();
    }
    
    // ========================================================================
    // تنظيف الإعدادات
    // ========================================================================
    
    // إعادة تفعيل كتابة العمق
    glDepthMask(GL_TRUE);
    
    // إيقاف الشفافية
    glDisable(GL_BLEND);
    
    // إعادة تفعيل الإضاءة للعناصر الأخرى
    glEnable(GL_LIGHTING);
    
    // استعادة المصفوفة السابقة
    glPopMatrix();
}

// ============================================================================
// دالة رسم حلقات كوكب زحل (تم نقلها إلى Planet::drawRings)
// ============================================================================
// هذه الدالة محفوظة للتوافق مع الكود القديم
// الحلقات الآن تُرسم داخل Planet::draw() لكل كوكب
// ============================================================================
void SolarSystem::drawSaturnRings() {
    // الحلقات الآن تُرسم داخل Planet::draw()
    // هذه الدالة فارغة للتوافق مع الكود القديم
    // يمكن حذفها في المستقبل إذا لم تعد هناك حاجة للتوافق
}
