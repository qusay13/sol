// ============================================================================
// ملف GameStateManager.cpp - تنفيذ كلاس مدير حالة اللعبة
// ============================================================================
// هذا الملف يحتوي على جميع الدوال التي تنفذ إدارة حالات التطبيق
// يتضمن إدارة القائمة والمحاكاة والحالات الأخرى
// ============================================================================

// تضمين ملف تعريف كلاس مدير حالة اللعبة
#include "../include/GameStateManager.h"

// ============================================================================
// ثوابت
// ============================================================================

// عدد أزرار القائمة (4 أزرار)
const int NUM_MENU_BUTTONS = 4;

// ============================================================================
// دالة البناء Constructor - تقوم بإنشاء مدير حالة جديد
// ============================================================================
// هذه الدالة تستدعى عند إنشاء كائن GameStateManager
// تقوم بتهيئة جميع المتغيرات بالقيم الافتراضية
// ============================================================================
GameStateManager::GameStateManager() 
    // قائمة التهيئة: تهيئة المتغيرات مباشرة قبل دخول جسم الدالة
    : currentState(MENU),      // الحالة الحالية: القائمة (الحالة الافتراضية)
      selectedButton(0),       // الزر المحدد: الزر الأول (0)
      menuAnimTime(0.0f)       // وقت الرسوم المتحركة للقائمة: 0.0 (يبدأ من الصفر)
{}

// ============================================================================
// دوال Getter و Setter للحالة الحالية
// ============================================================================

// إرجاع الحالة الحالية للعبة
GameState GameStateManager::getCurrentState() const { 
    return currentState;  // إرجاع الحالة الحالية
}

// تعيين الحالة الحالية للعبة
void GameStateManager::setCurrentState(GameState state) { 
    currentState = state;  // تعيين الحالة الجديدة
}

// ============================================================================
// دوال Getter و Setter للزر المحدد
// ============================================================================

// إرجاع رقم الزر المحدد في القائمة
int GameStateManager::getSelectedButton() const { 
    return selectedButton;  // إرجاع رقم الزر المحدد
}

// تعيين الزر المحدد في القائمة
void GameStateManager::setSelectedButton(int button) { 
    selectedButton = button;  // تعيين رقم الزر المحدد
}

// ============================================================================
// دوال التنقل بين الأزرار
// ============================================================================

// تحديد الزر السابق في القائمة
void GameStateManager::selectPrevious() { 
    // الانتقال للزر السابق مع التكرار الدائري
    // (selectedButton - 1 + NUM_MENU_BUTTONS) % NUM_MENU_BUTTONS
    // إذا كان selectedButton = 0، يصبح 3 (الزر الأخير)
    selectedButton = (selectedButton - 1 + NUM_MENU_BUTTONS) % NUM_MENU_BUTTONS;
}

// تحديد الزر التالي في القائمة
void GameStateManager::selectNext() { 
    // الانتقال للزر التالي مع التكرار الدائري
    // (selectedButton + 1) % NUM_MENU_BUTTONS
    // إذا كان selectedButton = 3، يصبح 0 (الزر الأول)
    selectedButton = (selectedButton + 1) % NUM_MENU_BUTTONS;
}

// ============================================================================
// دوال Getter و Setter لوقت الرسوم المتحركة
// ============================================================================

// إرجاع وقت الرسوم المتحركة للقائمة
float GameStateManager::getMenuAnimTime() const { 
    return menuAnimTime;  // إرجاع وقت الرسوم المتحركة
}

// تحديث وقت الرسوم المتحركة للقائمة
void GameStateManager::updateMenuAnimTime(float delta) { 
    menuAnimTime += delta;  // زيادة وقت الرسوم المتحركة بمقدار delta
}
