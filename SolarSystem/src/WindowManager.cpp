// ============================================================================
// ملف WindowManager.cpp - تنفيذ كلاس مدير النافذة
// ============================================================================
// هذا الملف يحتوي على جميع الدوال التي تنفذ إدارة النافذة
// يتضمن التحكم في الشاشة الكاملة وحجم النافذة
// ============================================================================

// تضمين ملف تعريف كلاس مدير النافذة
#include "../include/WindowManager.h"

// تضمين مكتبة OpenGL للرسومات ثلاثية الأبعاد
#include <GL/glut.h>

// تضمين مكتبة الإدخال/الإخراج القياسية (للطباعة)
#include <stdio.h>

// ============================================================================
// دالة البناء Constructor - تقوم بإنشاء مدير نافذة جديد
// ============================================================================
// هذه الدالة تستدعى عند إنشاء كائن WindowManager
// تقوم بتهيئة جميع المتغيرات بالقيم الافتراضية
// ============================================================================
WindowManager::WindowManager() 
    // قائمة التهيئة: تهيئة المتغيرات مباشرة قبل دخول جسم الدالة
    : isFullscreen(false),   // حالة الشاشة الكاملة: false (نافذة عادية)
      windowWidth(800),      // عرض النافذة الافتراضي: 800 بكسل
      windowHeight(600),     // ارتفاع النافذة الافتراضي: 600 بكسل
      windowPosX(100),       // موضع النافذة X: 100 بكسل من اليسار
      windowPosY(100)        // موضع النافذة Y: 100 بكسل من الأعلى
{}

// ============================================================================
// دالة تبديل الشاشة الكاملة - تفعيل/إلغاء الشاشة الكاملة
// ============================================================================
// هذه الدالة تستدعى عند الضغط على F11 لتبديل الشاشة الكاملة
// تقوم بحفظ موضع وحجم النافذة قبل الدخول في الشاشة الكاملة
// ============================================================================
void WindowManager::toggleFullscreen() {
    if (!isFullscreen) {  // إذا كانت النافذة عادية (ليست شاشة كاملة)
        // حفظ موضع وحجم النافذة الحالي قبل الدخول في الشاشة الكاملة
        // هذا يسمح باستعادتها عند الخروج من الشاشة الكاملة
        
        // الحصول على موضع النافذة X من GLUT
     
        
        // تفعيل الشاشة الكاملة
        glutFullScreen();
        
        // تحديث حالة الشاشة الكاملة
        isFullscreen = true;
        
        // طباعة رسالة في وحدة التحكم
        printf("Fullscreen enabled\n");
    } else {  // إذا كانت الشاشة كاملة
        // استعادة حجم النافذة الأصلي
        glutReshapeWindow(windowWidth, windowHeight);
        
        // استعادة موضع النافذة الأصلي
        glutPositionWindow(windowPosX, windowPosY);
        
        // تحديث حالة الشاشة الكاملة
        isFullscreen = false;
        
        // طباعة رسالة في وحدة التحكم
        printf("Fullscreen disabled\n");
    }
}

// ============================================================================
// دالة Getter - إرجاع حالة الشاشة الكاملة
// ============================================================================
// هذه الدالة ترجع true إذا كانت الشاشة كاملة، و false إذا كانت نافذة عادية
// ============================================================================
bool WindowManager::getIsFullscreen() const { 
    return isFullscreen;  // إرجاع حالة الشاشة الكاملة
}
